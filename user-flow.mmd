sequenceDiagram
    actor User as Пользователь
    participant UI as Интерфейс
    participant GS as Сервис графов
    participant TS as Сервис тезисов
    participant CS as Сервис Claude
    participant GDB as Графовая БД
    participant DDB as Документная БД
    
    Note over User,DDB: Уровень 1: Работа с графом концепции
    
    User->>UI: Создание категории "Субъективная реальность"
    UI->>GS: Запрос на создание категории
    GS->>GDB: Сохранение категории
    GDB-->>GS: Подтверждение
    
    User->>UI: Создание категории "Интерсубъективность"
    UI->>GS: Запрос на создание категории
    GS->>GDB: Сохранение категории
    GDB-->>GS: Подтверждение
    
    User->>UI: Создание связи "Диалектическая" между категориями
    UI->>GS: Запрос на создание связи
    GS->>GDB: Сохранение связи
    GDB-->>GS: Подтверждение
    
    User->>UI: Запрос обогащения категории "Субъективная реальность"
    UI->>CS: Запрос на обогащение
    CS->>GDB: Получение данных о категории и концепции
    GDB-->>CS: Данные
    CS->>Claude: Запрос к Claude
    Claude-->>CS: Развернутое описание
    CS->>DDB: Сохранение обогащения
    DDB-->>CS: Подтверждение
    CS-->>UI: Результат обогащения
    UI-->>User: Отображение результата
    
    User->>UI: Запрос валидации графа
    UI->>CS: Запрос на валидацию
    CS->>GDB: Получение полного графа концепции
    GDB-->>CS: Данные графа
    CS->>Claude: Запрос к Claude
    Claude-->>CS: Анализ и рекомендации
    CS-->>UI: Результаты валидации
    UI-->>User: Отображение результатов
    
    User->>UI: Внесение корректив в граф
    UI->>GS: Обновление графа
    GS->>GDB: Сохранение изменений
    GDB-->>GS: Подтверждение
    
    Note over User,DDB: Уровень 2: Работа с тезисами концепции
    
    User->>UI: Запрос на генерацию онтологических тезисов
    UI->>TS: Запрос с параметрами
    TS->>GDB: Получение данных графа
    GDB-->>TS: Данные
    TS->>CS: Запрос на генерацию тезисов
    CS->>Claude: Запрос к Claude
    Claude-->>CS: Сгенерированные тезисы
    CS->>DDB: Сохранение тезисов
    DDB-->>CS: Подтверждение
    CS-->>TS: Результат
    TS-->>UI: Тезисы
    UI-->>User: Отображение тезисов
    
    User->>UI: Запрос на обоснование тезиса
    UI->>CS: Запрос на обоснование
    CS->>DDB: Получение тезиса
    DDB-->>CS: Данные тезиса
    CS->>Claude: Запрос к Claude
    Claude-->>CS: Обоснование и контраргументы
    CS->>DDB: Сохранение обоснования
    DDB-->>CS: Подтверждение
    CS-->>UI: Результат обоснования
    UI-->>User: Отображение обоснования
    
    Note over User,DDB: Дополнительное взаимодействие
    
    User->>UI: Запрос на генерацию названия концепции
    UI->>CS: Запрос генерации названия
    CS->>GDB: Получение графа
    GDB-->>CS: Данные графа
    CS->>DDB: Получение тезисов
    DDB-->>CS: Данные тезисов
    CS->>Claude: Запрос к Claude
    Claude-->>CS: Предложенное название "Диалектический интерсубъективизм"
    CS-->>UI: Название и обоснование
    UI-->>User: Отображение результата
