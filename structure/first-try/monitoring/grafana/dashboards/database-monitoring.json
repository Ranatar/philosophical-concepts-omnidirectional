// monitoring/grafana/dashboards/database-monitoring.json
{
  "dashboard": {
    "title": "Philosophy Service Database Monitoring",
    "panels": [
      {
        "title": "Database Health Status",
        "type": "stat",
        "targets": [
          {
            "expr": "up{job='postgres'}",
            "legendFormat": "PostgreSQL"
          },
          {
            "expr": "up{job='neo4j'}",
            "legendFormat": "Neo4j"
          },
          {
            "expr": "up{job='mongodb'}",
            "legendFormat": "MongoDB"
          },
          {
            "expr": "up{job='redis'}",
            "legendFormat": "Redis"
          }
        ]
      },
      {
        "title": "Operation Latency",
        "type": "graph",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, rate(db_operation_duration_seconds_bucket[5m]))",
            "legendFormat": "95th percentile"
          }
        ]
      },
      {
        "title": "Sync Errors",
        "type": "counter",
        "targets": [
          {
            "expr": "increase(db_sync_errors_total[1h])",
            "legendFormat": "Sync Errors per Hour"
          }
        ]
      },
      {
        "title": "Active Transactions",
        "type": "gauge",
        "targets": [
          {
            "expr": "db_active_transactions",
            "legendFormat": "Active Transactions"
          }
        ]
      },
      {
        "title": "Data Integrity Issues",
        "type": "stat",
        "targets": [
          {
            "expr": "data_integrity_issues{severity='critical'}",
            "legendFormat": "Critical Issues"
          },
          {
            "expr": "data_integrity_issues{severity='high'}",
            "legendFormat": "High Issues"
          }
        ]
      }
    ],
    "refresh": "10s",
    "time": {
      "from": "now-6h",
      "to": "now"
    }
  }
}
